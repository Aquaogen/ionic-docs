import*as tslib_1 from"../polyfills/tslib.js";import{h}from"../app.core.js";import{a as Close,b as More,c as Ionic,d as Menu,e as NewTab}from"./chunk-fd2edfe7.js";var items=[{text:"GitHub",url:"https://github.com/ionic-team/ionic",className:"github"},{text:"Forum",url:"https://forum.ionicframework.com/",className:"forum"},{text:"Chat",url:"https://ionicworldwide.herokuapp.com/",className:"chat"},{text:"Blog",url:"https://blog.ionicframework.com/",className:"blog"},{text:"Twitter",url:"https://twitter.com/Ionicframework",className:"twitter"},{text:"Stack",url:"https://stackoverflow.com/questions/tagged/ionic-framework",className:"stack-overflow"},{text:"Swag",url:"https://shop.ionicframework.com/",className:"swag"}],CommunityDropdown=function(){return h("ctrl-dropdown",{class:"community-dropdown",autoClose:!0,items:items,renderer:function(e){return[h("a",{class:"community-dropdown__toggle",onClick:e.toggle},"Community",h("svg",{viewBox:"0 0 33 22"},h("polygon",{points:"16.5 22 0 0 33 0"}))),h("a",{class:"community-dropdown__mobile-toggle",onClick:e.toggle},h(e.isOpen?Close:More,null)),h("div",{class:{"community-dropdown__panel":!0,"is-open":e.isOpen}},h("div",{class:"community-dropdown__title"},"Community"),h("ul",null,e.items.map(function(e){var t;return h("li",{class:(t={"community-dropdown__item":!0},t[e.className]=!0,t)},h("a",{href:e.url,target:"_blank"},e.text))})),h("stencil-route-link",{url:"/docs/",class:"community-dropdown__home",onClick:e.close},h("svg",{viewBox:"0 0 16 24"},h("path",{d:"M3 2l10 10L3 22","stroke-width":"3",fill:"none","fill-rule":"evenodd"})),"Home"))]}})},DocsHeader=function(){function e(){this.isMenuOpen=!1}return e.prototype.getGithubLink=function(e){switch(e){case"cli":return"https://github.com/ionic-team/ionic-cli";default:return"https://github.com/ionic-team/ionic"}},e.prototype.render=function(){return h("nav",null,h("button",{onClick:this.onToggleClick,class:"menu-toggle"},h(this.isMenuOpen?Close:Menu,null)),h("a",{href:"/docs/",class:"docs-logo"},h(Ionic,null),h("span",null,"Docs")),h("ionic-search",null),h(CommunityDropdown,null),h("a",{href:this.getGithubLink(this.section),class:"github-link",target:"_blank"},"GitHub",h(NewTab,null)))},Object.defineProperty(e,"is",{get:function(){return"docs-header"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{isMenuOpen:{type:Boolean,attr:"is-menu-open"},onToggleClick:{type:"Any",attr:"on-toggle-click"},section:{type:String,attr:"section"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"/**style-placeholder:docs-header:**/"},enumerable:!0,configurable:!0}),e}(),IonicSearch=function(){function e(){this.active=!1,this.query="",this.pending=0,this.results=null,this.selectedIndex=-1,this.focused=!1,this.dragY=null,this.startY=null,this.screenHeight=null,this.URLS=function(){var e="https://api.swiftype.com/api/v1/public/engines/",t="9oVyaKGPzxoZAyUo9Sm8";return{autocomplete:function(s){return e+"suggest.json?q="+s+"&engine_key="+t},search:function(s){return e+"search.json?q="+s+"&engine_key="+t}}},this.close=this.close.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.focus=this.focus.bind(this),this.urls=this.URLS()}return e.prototype.close=function(){var e=this;this.active=!1,this.query="",this.focused=!1,this.selectedIndex=-1,this.el.querySelector("input").value="",this.el.classList.remove("active"),this.el.querySelector("input").blur(),setTimeout(function(){e.results=null},500,this)},e.prototype.onKeyDown=function(e){return tslib_1.__awaiter(this,void 0,void 0,function(){var t,s,n;return tslib_1.__generator(this,function(i){switch(i.label){case 0:return 27===e.keyCode?(this.close(),[2]):38===e.keyCode&&this.selectedIndex>0?(this.selectedIndex--,e.preventDefault(),[2]):40===e.keyCode&&this.selectedIndex<this.results.beta.length+this.results.main.length-1?(this.selectedIndex++,e.preventDefault(),[2]):13===e.keyCode?((t=this.el.querySelector('li a[data-index="'+this.selectedIndex+'"]'))&&t.click(),[2]):(s=this.query=e.target.value,e.target.value.length<3?(this.results=null,[2]):(this.pending++,[4,fetch(this.urls.autocomplete(s))]));case 1:return[4,i.sent().json()];case 2:return n=i.sent(),this.pending--,this.results=n.records.page.reduce(function(e,t){return e.beta||(e={beta:[],main:[]}),-1!==t.url.indexOf("beta.ionicframework.com")?e.beta.push(t):e.main.push(t),e}),[2]}})})},e.prototype.focus=function(){var e=document.getElementById("search-input");e&&e.focus()},e.prototype.getBoxClass=function(){var e="search-box";return(e+=this.query.length>3?" active":"")+(this.focused?" focused":"")},e.prototype.printResults=function(e,t){var s=this;return void 0===t&&(t=0),e.map(function(e,n){return h("li",{class:"result"},h("a",{href:e.url,title:e.title,class:s.selectedIndex===n+t?"selected":"","data-index":n+t,onMouseOver:function(){s.selectedIndex=n+t}},h("strong",null,e.title),h("small",{innerHTML:e.highlight.sections})))})},e.prototype.render=function(){var e=this;return[h("div",{class:this.getBoxClass(),style:this.dragStyles},h("input",{type:"text",id:"search-input",onKeyUp:this.onKeyDown,onFocus:function(){e.focused=!0},placeholder:"Search Ionic.."}),h("ion-icon",{class:"search-static "+(this.active?" active":""),name:"md-search"}),h("ion-icon",{class:"close "+(this.query.length?" active":""),name:"close-circle",onClick:this.close}),null!==this.results?h("ul",null,this.results.beta.length?h("li",{class:"title"},"beta.ionicframework.com"):null,this.printResults(this.results.beta),this.results.main.length?h("li",{class:"title"},"ionicframework.com"):null,this.printResults(this.results.main,this.results.beta.length),0===this.results.length?h("li",null,h("span",{class:"no-results"},"No results")):null):null,this.pending>0?h("span",{class:"searching"}):null),h("ion-icon",{class:"search-mobile-toggle "+(this.focused?" focused":""),onClick:this.focus,name:"md-search"}),h("div",{class:"scroll-block "+(this.focused?" focused":""),onClick:this.close})]},Object.defineProperty(e,"is",{get:function(){return"ionic-search"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{active:{state:!0},contentEl:{state:!0},dragStyles:{state:!0},el:{elementRef:!0},focused:{state:!0},mobile:{type:Boolean,attr:"mobile"},pending:{state:!0},query:{state:!0},results:{state:!0},selectedIndex:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"/**style-placeholder:ionic-search:**/"},enumerable:!0,configurable:!0}),e}();export{DocsHeader,IonicSearch};